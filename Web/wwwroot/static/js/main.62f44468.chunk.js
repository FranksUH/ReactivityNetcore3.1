(this["webpackJsonpclient-app"]=this["webpackJsonpclient-app"]||[]).push([[0],{406:function(e,t,a){e.exports=a(707)},411:function(e,t,a){},707:function(e,t,a){"use strict";a.r(t),a.d(t,"history",(function(){return Oa}));var n=a(0),r=a.n(n),i=a(27),o=a.n(i),c=(a(411),a(718)),l=a(394),u=a(735),s=a(395),m=a(146),d=a(29),p=a(56),b=a(115),f=a(20),h=a.n(f),g=a(30),v=a(393),E=a(14),j=a(117),O=a(11),y=(a(128),a(7)),w=a(65),C=a.n(w),S=a(42);C.a.defaults.baseURL="/api",C.a.interceptors.request.use((function(e){var t=window.localStorage.getItem("jwt");return t&&(e.headers.Authorization="bearer ".concat(t)),e}),(function(e){return Promise.reject(e)})),C.a.interceptors.response.use(void 0,(function(e){console.log(e),"Network Error"!==e.message||e.content||S.b.error("Network Failed");var t=e.response,a=t.status,n=t.data,r=t.config;throw 404===a&&Oa.push("/notFound"),400===a&&"get"===r.method&&n.errors.hasOwnProperty("id")&&Oa.push("/notFound"),500===a&&S.b.error("Internal Server Error"),e.response}));var x,k,A,z,I,P,R,N,F,L,M,D,H,U,G,T,q,B,V,W,J,Y,$,K,Q,X,Z,_,ee,te,ae,ne,re,ie,oe,ce,le,ue,se,me,de,pe,be,fe,he,ge,ve,Ee,je,Oe,ye,we,Ce,Se,xe,ke,Ae,ze=function(e){return e.data},Ie=function(e){return C.a.get(e).then(ze)},Pe=function(e,t){return C.a.post(e,t).then(ze)},Re=function(e,t){return C.a.put(e,t).then(ze)},Ne=function(e){return C.a.delete(e).then(ze)},Fe=function(e,t){var a=new FormData;return a.append("File",t),C.a.post(e,a,{headers:{"Content-type":"multipart/form-data"}}).then(ze)},Le={list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,n=new URLSearchParams;return a.forEach((function(e,t){console.log("key: ",t,"value: ",e),"startDate"===t?n.append(t,e.toISOString()):n.append(t,e.toString())})),C.a.get("/activities/".concat(e,"/").concat(t),{params:n}).then(ze)},details:function(e){return Ie("/activities/".concat(e))},create:function(e){return Pe("/activities",e)},update:function(e){return Re("/activities/".concat(e.id),e)},delete:function(e){return Ne("/activities/".concat(e))},attend:function(e){return Pe("/activities/".concat(e,"/attend"),{})},unattend:function(e){return Ne("/activities/".concat(e,"/attend"))}},Me={current:function(){return Ie("/user")},login:function(e){return Pe("/user/login",e)},register:function(e){return Pe("/user/register",e)}},De={get:function(e){return Ie("/profile/".concat(e))},uploadPhoto:function(e){return Fe("/photo",e)},setMain:function(e){return Pe("/photo/".concat(e,"/setMain"),{})},deletePhoto:function(e){return Ne("/photo/".concat(e))},follow:function(e){return Pe("/profile/".concat(e,"/follow"),{})},unFollow:function(e){return Ne("/profile/".concat(e,"/follow"))},listFollowings:function(e){return Ie("profile/".concat(e,"/following"))},listFollowers:function(e){return Ie("profile/".concat(e,"/followers"))},listActivities:function(e,t){return Ie("profile/".concat(e,"/activities/?predicate=").concat(t))}},He=function(e,t){return e.date=e.date.split(".")[0],e.isGoing=e.attendees.some((function(e){return e.userName===t.userName})),e.isHost=e.attendees.some((function(e){return e.userName===t.userName&&e.isHost})),e},Ue=function(e){return{displayName:e.displayName,image:e.image,isHost:!1,userName:e.userName}},Ge=a(242),Te=(x=y.f.ref,k=function(){function e(t){var a=this;Object(p.a)(this,e),Object(E.a)(this,"activitiesRegistry",A,this),Object(E.a)(this,"selectedActivity",z,this),Object(E.a)(this,"loadingInitial",I,this),Object(E.a)(this,"submiting",P,this),Object(E.a)(this,"target",R,this),Object(E.a)(this,"loading",N,this),Object(E.a)(this,"hubConnection",F,this),Object(E.a)(this,"page",L,this),Object(E.a)(this,"filterPredicate",M,this),Object(E.a)(this,"numberOfPages",D,this),this.rootStore=void 0,Object(E.a)(this,"setPredicat",H,this),Object(E.a)(this,"createHubConnection",U,this),Object(E.a)(this,"stopHubConnection",G,this),Object(E.a)(this,"addComment",T,this),Object(E.a)(this,"loadActivities",q,this),Object(E.a)(this,"createActivity",B,this),Object(E.a)(this,"editActivities",V,this),Object(E.a)(this,"deleteActivity",W,this),Object(E.a)(this,"loadActivity",J,this),Object(E.a)(this,"clearActivity",Y,this),Object(E.a)(this,"joinActivity",$,this),Object(E.a)(this,"cancelAttendee",K,this),Object(E.a)(this,"setPage",Q,this),this.rootStore=t,Object(y.g)((function(){return a.filterPredicate.keys()}),(function(){a.page=0,a.activitiesRegistry.clear(),a.loadActivities()}))}return Object(j.a)(e,[{key:"groupActivitiesByDate",value:function(e){var t=e.sort((function(e,t){return Date.parse(e.date)-Date.parse(t.date)}));return Object.entries(t.reduce((function(e,t){var a=t.date.split("T")[0];return e[a]=e[a]?[].concat(Object(v.a)(e[a]),[t]):[t],e}),{}))}},{key:"activitiesByDate",get:function(){return this.groupActivitiesByDate(Array.from(this.activitiesRegistry.values()))}}]),e}(),A=Object(O.a)(k.prototype,"activitiesRegistry",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),z=Object(O.a)(k.prototype,"selectedActivity",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=Object(O.a)(k.prototype,"loadingInitial",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=Object(O.a)(k.prototype,"submiting",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),R=Object(O.a)(k.prototype,"target",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),N=Object(O.a)(k.prototype,"loading",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F=Object(O.a)(k.prototype,"hubConnection",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=Object(O.a)(k.prototype,"page",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=Object(O.a)(k.prototype,"filterPredicate",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),D=Object(O.a)(k.prototype,"numberOfPages",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),H=Object(O.a)(k.prototype,"setPredicat",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){e.filterPredicate.clear(),"all"!==t&&e.filterPredicate.set(t,a)}}}),U=Object(O.a)(k.prototype,"createHubConnection",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.hubConnection=(new Ge.a).withUrl("/chat",{accessTokenFactory:function(){return e.rootStore.commonStore.token}}).configureLogging(Ge.b.Information).build(),e.hubConnection.start().then((function(){return console.log(e.hubConnection.state)})).catch((function(e){return console.log("Error stableshing connection: ",e)})),e.hubConnection.on("ReceiveComment",(function(t){Object(y.h)((function(){var a;console.log("received ",t),null===(a=e.selectedActivity)||void 0===a||a.comments.push(t)}))}))}}}),G=Object(O.a)(k.prototype,"stopHubConnection",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.hubConnection.stop()}}}),T=Object(O.a)(k.prototype,"addComment",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(g.a)(h.a.mark((function t(a){var n,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.ActivityId=null===(n=e.selectedActivity)||void 0===n?void 0:n.id,t.prev=1,t.next=4,null===(r=e.hubConnection)||void 0===r?void 0:r.invoke("SendComment",a);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}()}}),q=Object(O.a)(k.prototype,"loadActivities",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(g.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingInitial=!0,t.prev=1,t.next=4,Le.list(2,2*e.page,e.filterPredicate);case 4:a=t.sent,Object(y.h)((function(){a.activities.forEach((function(t){He(t,e.rootStore.userStore.user),e.activitiesRegistry.set(t.id,t)})),e.numberOfPages=Math.ceil(a.activityCount/2),e.loadingInitial=!1})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),Object(y.h)((function(){console.log(t.t0),e.loadingInitial=!1}));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))}}),B=Object(O.a)(k.prototype,"createActivity",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(g.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.submiting=!0,t.prev=1,t.next=4,Le.create(a);case 4:n=Object(b.a)({},Ue(e.rootStore.userStore.user),{isHost:!0}),a.attendees=[n],a.isHost=!0,Object(y.h)((function(){e.activitiesRegistry.set(a.id,a),e.submiting=!1})),Oa.push("/activities/".concat(a.id)),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(1),Object(y.h)((function(){console.log(t.t0),e.submiting=!1})),S.b.error("Problem submitting data");case 15:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()}}),V=Object(O.a)(k.prototype,"editActivities",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(g.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.submiting=!0,t.prev=1,t.next=4,Le.update(a);case 4:Object(y.h)((function(){e.activitiesRegistry.set(a.id,a),e.selectedActivity=a,e.submiting=!1})),Oa.push("/activities/".concat(a.id)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),Object(y.h)((function(){e.submiting=!1,console.log(t.t0),S.b.error("Problem submitting data")}));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}}),W=Object(O.a)(k.prototype,"deleteActivity",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(g.a)(h.a.mark((function t(a,n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.submiting=!0,e.target=a.currentTarget.name,t.prev=2,t.next=5,Le.delete(n);case 5:Object(y.h)((function(){e.activitiesRegistry.delete(n),e.submiting=!1,e.target=""})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),Object(y.h)((function(){console.log(t.t0),e.submiting=!1,e.target=""}));case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e,a){return t.apply(this,arguments)}}()}}),J=Object(O.a)(k.prototype,"loadActivity",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(g.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.activitiesRegistry.get(a))){t.next=6;break}return e.selectedActivity=n,t.abrupt("return",n);case 6:return e.loadingInitial=!0,t.prev=7,t.next=10,Le.details(a);case 10:return n=t.sent,Object(y.h)((function(){He(n,e.rootStore.userStore.user),e.loadingInitial=!1,e.selectedActivity=n,e.activitiesRegistry.set(a,n)})),t.abrupt("return",n);case 15:t.prev=15,t.t0=t.catch(7),Object(y.h)((function(){e.loadingInitial=!1})),console.log(t.t0);case 19:case"end":return t.stop()}}),t,null,[[7,15]])})));return function(e){return t.apply(this,arguments)}}()}}),Y=Object(O.a)(k.prototype,"clearActivity",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.selectedActivity=null}}}),$=Object(O.a)(k.prototype,"joinActivity",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(g.a)(h.a.mark((function t(){var a,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Ue(e.rootStore.userStore.user),t.prev=1,e.loading=!0,t.next=5,Le.attend(null===(n=e.selectedActivity)||void 0===n?void 0:n.id);case 5:Object(y.h)((function(){e.loading=!1,e.selectedActivity&&(e.selectedActivity.attendees.push(a),e.selectedActivity.isGoing=!0,e.activitiesRegistry.set(e.selectedActivity.id,e.selectedActivity))})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),Object(y.h)((function(){e.loading=!1})),S.b.error("Error attending activity");case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))}}),K=Object(O.a)(k.prototype,"cancelAttendee",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(g.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,Le.unattend(null===(a=e.selectedActivity)||void 0===a?void 0:a.id);case 4:Object(y.h)((function(){var t;(e.loading=!1,e.selectedActivity)&&(e.selectedActivity.attendees=null===(t=e.selectedActivity)||void 0===t?void 0:t.attendees.filter((function(t){var a;return t.userName!==(null===(a=e.rootStore.userStore.user)||void 0===a?void 0:a.userName)})),e.selectedActivity.isGoing=!1,e.activitiesRegistry.set(e.selectedActivity.id,e.selectedActivity))})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),Object(y.h)((function(){e.loading=!1})),S.b.error("Error canceling attendancy");case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))}}),Q=Object(O.a)(k.prototype,"setPage",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.page=t}}}),Object(O.a)(k.prototype,"activitiesByDate",[y.c],Object.getOwnPropertyDescriptor(k.prototype,"activitiesByDate"),k.prototype),k),qe=(X=function(){function e(t){Object(p.a)(this,e),Object(E.a)(this,"user",Z,this),this.rootStore=void 0,Object(E.a)(this,"GetUser",_,this),Object(E.a)(this,"Login",ee,this),Object(E.a)(this,"Register",te,this),Object(E.a)(this,"Logout",ae,this),this.rootStore=t}return Object(j.a)(e,[{key:"LoggedIn",get:function(){return!!this.user}}]),e}(),Z=Object(O.a)(X.prototype,"user",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(O.a)(X.prototype,"LoggedIn",[y.c],Object.getOwnPropertyDescriptor(X.prototype,"LoggedIn"),X.prototype),_=Object(O.a)(X.prototype,"GetUser",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(g.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Me.current();case 3:a=t.sent,Object(y.h)((function(){return e.user=a})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))}}),ee=Object(O.a)(X.prototype,"Login",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(g.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Me.login(a);case 3:n=t.sent,Object(y.h)((function(){e.user=n,e.rootStore.commonStore.setToken(n.token)})),e.rootStore.modalStore.closeModal(),Oa.push("/activities"),t.next=13;break;case 9:throw t.prev=9,t.t0=t.catch(0),console.log(t.t0),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}}),te=Object(O.a)(X.prototype,"Register",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(g.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Me.register(a);case 3:n=t.sent,e.rootStore.commonStore.setToken(n.token),e.rootStore.modalStore.closeModal(),Oa.push("/activities"),t.next=12;break;case 9:throw t.prev=9,t.t0=t.catch(0),t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}}),ae=Object(O.a)(X.prototype,"Logout",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.user=null,e.rootStore.commonStore.setToken(null),Oa.push("/")}}}),X),Be=(ne=function e(t){var a=this;Object(p.a)(this,e),this.rootStore=void 0,Object(E.a)(this,"token",re,this),Object(E.a)(this,"appLoadded",ie,this),Object(E.a)(this,"setToken",oe,this),Object(E.a)(this,"setLoaded",ce,this),this.rootStore=t,Object(y.g)((function(){return a.token}),(function(e){e?window.localStorage.setItem("jwt",e):window.localStorage.removeItem("jwt")}))},re=Object(O.a)(ne.prototype,"token",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return window.localStorage.getItem("jwt")}}),ie=Object(O.a)(ne.prototype,"appLoadded",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),oe=Object(O.a)(ne.prototype,"setToken",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){window.localStorage.setItem("jwt",t),e.token=t}}}),ce=Object(O.a)(ne.prototype,"setLoaded",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.appLoadded=!0}}}),ne),Ve=(le=y.f.shallow,ue=function e(t){Object(p.a)(this,e),this.rootStore=void 0,Object(E.a)(this,"modal",se,this),Object(E.a)(this,"openModal",me,this),Object(E.a)(this,"closeModal",de,this),this.rootStore=t},se=Object(O.a)(ue.prototype,"modal",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{open:!1,body:null}}}),me=Object(O.a)(ue.prototype,"openModal",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.modal.open=!0,e.modal.body=t}}}),de=Object(O.a)(ue.prototype,"closeModal",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.modal.open=!1,e.modal.body=null}}}),ue),We=(pe=function(){function e(t){Object(p.a)(this,e),this.rootStore=void 0,Object(E.a)(this,"profile",be,this),Object(E.a)(this,"loading",fe,this),Object(E.a)(this,"uploading",he,this),Object(E.a)(this,"loadingSetting",ge,this),Object(E.a)(this,"followings",ve,this),Object(E.a)(this,"userActivities",Ee,this),Object(E.a)(this,"loadingActivities",je,this),Object(E.a)(this,"loadUserActivities",Oe,this),Object(E.a)(this,"LoadProfile",ye,this),Object(E.a)(this,"UploadPhoto",we,this),Object(E.a)(this,"setMain",Ce,this),Object(E.a)(this,"deleteUser",Se,this),Object(E.a)(this,"follow",xe,this),Object(E.a)(this,"unfollow",ke,this),Object(E.a)(this,"loadFollows",Ae,this),this.rootStore=t}return Object(j.a)(e,[{key:"IsCurrentUser",get:function(){return!(!this.rootStore.userStore.user||!this.profile)&&this.rootStore.userStore.user.userName===this.profile.userName}}]),e}(),be=Object(O.a)(pe.prototype,"profile",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=Object(O.a)(pe.prototype,"loading",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),he=Object(O.a)(pe.prototype,"uploading",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ge=Object(O.a)(pe.prototype,"loadingSetting",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ve=Object(O.a)(pe.prototype,"followings",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ee=Object(O.a)(pe.prototype,"userActivities",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),je=Object(O.a)(pe.prototype,"loadingActivities",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(O.a)(pe.prototype,"IsCurrentUser",[y.c],Object.getOwnPropertyDescriptor(pe.prototype,"IsCurrentUser"),pe.prototype),Oe=Object(O.a)(pe.prototype,"loadUserActivities",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(g.a)(h.a.mark((function t(a,n){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingActivities=!0,t.prev=1,t.next=4,De.listActivities(a,n);case 4:r=t.sent,console.log(r),Object(y.h)((function(){e.userActivities=r,e.loadingActivities=!1})),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),S.b.error("Problem loading activities"),Object(y.h)((function(){e.loadingActivities=!1}));case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,a){return t.apply(this,arguments)}}()}}),ye=Object(O.a)(pe.prototype,"LoadProfile",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(g.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,De.get(a);case 4:n=t.sent,Object(y.h)((function(){e.profile=n,e.loading=!1})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),Object(y.h)((function(){e.loading=!1})),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}}),we=Object(O.a)(pe.prototype,"UploadPhoto",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(g.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.uploading=!0,t.prev=1,t.next=4,De.uploadPhoto(a);case 4:n=t.sent,Object(y.h)((function(){e.profile&&(e.profile.photos.push(n),n.isMain&&e.rootStore.userStore.user&&(e.rootStore.userStore.user.image=n.id,e.profile.image=n.id)),e.uploading=!1})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),Object(y.h)((function(){e.uploading=!1})),S.b.error("Problem uploading photo");case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}}),Ce=Object(O.a)(pe.prototype,"setMain",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(g.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingSetting=!0,t.prev=1,t.next=4,De.setMain(a.id);case 4:Object(y.h)((function(){e.rootStore.userStore.user.image=a.id,e.profile.photos.find((function(e){return e.isMain})).isMain=!1,e.profile.photos.find((function(e){return e.id===a.id})).isMain=!0,e.profile.image=a.id,e.loadingSetting=!1})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),Object(y.h)((function(){e.loadingSetting=!1})),S.b.error("Error setting as default");case 11:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}}),Se=Object(O.a)(pe.prototype,"deleteUser",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(g.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingSetting=!0,t.prev=1,t.next=4,De.deletePhoto(a.id);case 4:Object(y.h)((function(){var t;e.profile.photos=null===(t=e.profile)||void 0===t?void 0:t.photos.filter((function(e){return e.id!==a.id})),e.loadingSetting=!1})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),Object(y.h)((function(){e.loadingSetting=!1})),S.b.error("Error setting as default");case 11:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}}),xe=Object(O.a)(pe.prototype,"follow",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(g.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,De.follow(a);case 4:Object(y.h)((function(){e.profile.following=!0,e.profile.followersCount++,e.loading=!1})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),e.loading=!1,S.b.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}}),ke=Object(O.a)(pe.prototype,"unfollow",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(g.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,De.unFollow(a);case 4:Object(y.h)((function(){e.profile.following=!1,e.profile.followersCount--,e.loading=!1})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),e.loading=!1,S.b.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}}),Ae=Object(O.a)(pe.prototype,"loadFollows",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(g.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.loadingSetting=!0,t.prev=1,console.log(e.profile.userName),"following"!==a){t.next=9;break}return t.next=6,De.listFollowings(e.profile.userName);case 6:t.t0=t.sent,t.next=12;break;case 9:return t.next=11,De.listFollowers(e.profile.userName);case 11:t.t0=t.sent;case 12:n=t.t0,Object(y.h)((function(){e.followings=n,e.loadingSetting=!1})),t.next=20;break;case 16:t.prev=16,t.t1=t.catch(1),S.b.error(t.t1),Object(y.h)((function(){e.loading=!1}));case 20:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}}),pe);Object(y.d)({enforceActions:"always"});var Je=Object(n.createContext)(new function e(){Object(p.a)(this,e),this.userStore=void 0,this.commonStore=void 0,this.activityStore=void 0,this.modalStore=void 0,this.profileStore=void 0,this.userStore=new qe(this),this.activityStore=new Te(this),this.commonStore=new Be(this),this.modalStore=new Ve(this),this.profileStore=new We(this)}),Ye=a(21),$e=Object(Ye.a)((function(){var e=Object(n.useContext)(Je).userStore,t=e.user,a=e.Logout,i=t&&t.image?"/assets/Images/".concat(t.image,".jpg"):"/assets/user.png";return r.a.createElement(l.a,{fixed:"top",inverted:!0},r.a.createElement(c.a,null,r.a.createElement(l.a.Item,{header:!0,as:d.b,exact:!0,to:"/"},r.a.createElement("img",{src:"/assets/logo.png",alt:"logo",style:{marginRight:10}}),"Reactivities"),r.a.createElement(l.a.Item,{name:"Activities",exact:!0,as:d.b,to:"/activities"}),r.a.createElement(l.a.Item,null,r.a.createElement(u.a,{as:d.b,to:"/activitiesCreate",positive:!0,content:"Create Activity"})),t&&r.a.createElement(l.a.Item,{position:"right"},r.a.createElement(s.a,{avatar:!0,spaced:"right",src:i}),r.a.createElement(m.a,{pointing:"top left",text:t.displayName},r.a.createElement(m.a.Menu,null,r.a.createElement(m.a.Item,{as:d.a,to:"/profile/".concat(t.userName),text:"My profile",icon:"user"}),r.a.createElement(m.a.Item,{onClick:a,text:"Logout",icon:"power"}))))))})),Ke=a(62),Qe=a(396),Xe=a(192),Ze=a(730),_e=a(243),et=a(88),tt=a(731),at=a(729),nt={borderColor:"orange",borderWidth:2},rt=function(e){var t=e.attendees;return r.a.createElement(tt.a,{horizontal:!0},t.map((function(e){return r.a.createElement(tt.a.Item,{key:e.userName},r.a.createElement(at.a,{header:e.displayName,trigger:r.a.createElement(s.a,{size:"mini",circular:!0,bordered:!0,src:e.image?"/assets/Images/".concat(e.image,".jpg"):"/assets/user.png",style:e.following?nt:null})}))})))},it=function(e){var t=e.activity,a=t.attendees.filter((function(e){return e.isHost}))[0],n=(null===a||void 0===a?void 0:a.image)?"/assets/Images/".concat(a.image,".jpg"):"/assets/user.png";return r.a.createElement(_e.a.Group,null,r.a.createElement(_e.a,null,r.a.createElement(Ze.a.Group,null,r.a.createElement(Ze.a,null,r.a.createElement(Ze.a.Image,{size:"tiny",circular:!0,src:n,style:{margin:6}}),r.a.createElement(Ze.a.Content,null,r.a.createElement(Ze.a.Header,{as:d.a,to:"activities/".concat(t.id)},t.title),r.a.createElement(Ze.a.Meta,null,t.date),a&&r.a.createElement(Ze.a.Description,null,"Hosted by",r.a.createElement(d.a,{to:"/profile/".concat(a.userName)}," ",a.displayName)),r.a.createElement(Ze.a.Description,null,t.isHost&&r.a.createElement(Xe.a,{color:"green",basic:!0,content:"You are hosting this activity"}),!t.isHost&&t.isGoing&&r.a.createElement(Xe.a,{color:"orange",basic:!0,content:"You are attending this activity"})))))),r.a.createElement(_e.a,null,r.a.createElement(et.a,{name:"clock"})," ",t.date,r.a.createElement(et.a,{name:"marker"})," ",t.venue," ",t.city),r.a.createElement(_e.a,{secondary:!0},r.a.createElement(rt,{attendees:t.attendees})),r.a.createElement(_e.a,{clearing:!0},r.a.createElement("span",null,t.description),r.a.createElement(u.a,{as:d.a,to:"/activities/".concat(t.id),floated:"right",content:"View",color:"blue"})))},ot=a(724),ct=Object(Ye.a)((function(){var e=Object(n.useContext)(Je).activityStore.activitiesByDate;return r.a.createElement(n.Fragment,null,e.map((function(e){var t=Object(Ke.a)(e,2),a=t[0],i=t[1];return r.a.createElement(n.Fragment,{key:a},r.a.createElement(Xe.a,{size:"large",color:"blue"},Object(ot.a)(a,"eeee do MMMM")),r.a.createElement(Ze.a.Group,{divided:!0},i.map((function(e){return r.a.createElement(it,{key:e.id,activity:e})}))))})))})),lt=a(737),ut=a(721),st=function(e){var t=e.inverted,a=void 0===t||t,n=e.content;return r.a.createElement(lt.a,{active:!0,inverted:a},r.a.createElement(ut.a,{content:n}))},mt=a(738),dt=a(378),pt=Object(Ye.a)((function(){var e=Object(n.useContext)(Je).activityStore,t=e.filterPredicate,a=e.setPredicat;return r.a.createElement(n.Fragment,null,r.a.createElement(l.a,{vertical:!0,size:"large",style:{width:"100%",marginTop:50}},r.a.createElement(mt.a,{icon:"filter",attached:!0,color:"teal",content:"Filters"}),r.a.createElement(l.a.Item,{active:0===t.size,onClick:function(){return a("all","true")},color:"blue",name:"all",content:"All Activities"}),r.a.createElement(l.a.Item,{active:t.has("isGoing"),onClick:function(){return a("isGoing","true")},color:"blue",name:"username",content:"I'm Going"}),r.a.createElement(l.a.Item,{active:t.has("isHost"),onClick:function(){return a("isHost","true")},color:"blue",name:"host",content:"I'm hosting"})),r.a.createElement(mt.a,{icon:"calendar",attached:!0,color:"teal",content:"Select Date"}),r.a.createElement(dt.Calendar,{onChange:function(e){return a("startDate",e)},value:t.get("startDate")||new Date}))})),bt=Object(Ye.a)((function(){var e=Object(n.useContext)(Je).activityStore,t=e.loadActivities,a=e.loadingInitial,i=e.numberOfPages,o=e.page,c=e.setPage,l=Object(n.useState)(!1),s=Object(Ke.a)(l,2),m=s[0],d=s[1];return Object(n.useEffect)((function(){t()}),[t]),a&&0===o?r.a.createElement(st,{content:"Loading activities"}):(console.log("page: ",o,"numPag: ",i),r.a.createElement(Qe.a,null,r.a.createElement(Qe.a.Column,{width:10},r.a.createElement(ct,null),r.a.createElement(u.a,{floated:"right",content:"See more",positive:!0,disabled:o+1>=i,onClick:function(){d(!0),c(o+1),t().then((function(){return d(!1)}))},loading:m})),r.a.createElement(Qe.a.Column,{width:6},r.a.createElement(pt,null))))})),ft=a(87),ht=a(116),gt=a(32),vt=a(725),Et=function(e){var t=e.input,a=e.width,n=e.type,i=e.placeholder,o=e.meta,c=o.touched,l=o.error;return r.a.createElement(vt.a.Field,{error:c&&!!l,type:n,width:a},r.a.createElement("input",Object.assign({},t,{placeholder:i})),c&&l&&r.a.createElement(Xe.a,{basic:!0,color:"red"},l))},jt=a(71),Ot=a(37),yt=a(734),wt=function(e){var t=e.error,a=e.text;return r.a.createElement(yt.a,{error:!0},r.a.createElement(yt.a.Header,null,t.statusText),t.data&&Object.keys(t.data.errors).length>0&&r.a.createElement(yt.a.List,null,Object.values(t.data.errors).flat().map((function(e,t){return r.a.createElement(yt.a.Item,{key:t},e)}))),a&&r.a.createElement(yt.a.Content,{content:a}))},Ct=function(){var e=Object(n.useContext)(Je).userStore.Login,t=Object(Ot.combineValidators)({email:Object(Ot.isRequired)("email"),password:Object(Ot.isRequired)("password")});return r.a.createElement(gt.b,{onSubmit:function(t){return e(t).catch((function(e){return Object(ht.a)({},jt.a,e)}))},validate:t,render:function(e){var t=e.handleSubmit,a=e.submitting,n=e.dirtySinceLastSubmit,i=e.invalid,o=e.pristine,c=e.submitError;return r.a.createElement(vt.a,{onSubmit:t,error:!0},r.a.createElement(mt.a,{as:"h2",content:"Login to Reactivities",color:"teal",textAlign:"center"}),r.a.createElement(gt.a,{name:"email",component:Et,placeholder:"Email"}),r.a.createElement(gt.a,{name:"password",component:Et,placeholder:"Password",type:"password"}),c&&r.a.createElement(wt,{error:c,text:"Invalid UserName or Password"}),r.a.createElement("br",null),r.a.createElement(u.a,{color:"teal",fluid:!0,disabled:i&&!n||o,loading:a,content:"Login"}))}})},St=function(){var e=Object(n.useContext)(Je).userStore.Register,t=Object(Ot.combineValidators)({email:Object(Ot.isRequired)("email"),password:Object(Ot.isRequired)("password"),userName:Object(Ot.isRequired)("userName"),displayName:Object(Ot.isRequired)("displayName")});return r.a.createElement(gt.b,{onSubmit:function(t){return e(t).catch((function(e){return Object(ht.a)({},jt.a,e)}))},validate:t,render:function(e){var t=e.handleSubmit,a=e.submitting,n=e.dirtySinceLastSubmit,i=e.invalid,o=e.pristine,c=e.submitError;return r.a.createElement(vt.a,{onSubmit:t,error:!0},r.a.createElement(mt.a,{as:"h2",content:"Sign up to Reactivities",color:"teal",textAlign:"center"}),r.a.createElement(gt.a,{name:"email",component:Et,placeholder:"Email"}),r.a.createElement(gt.a,{name:"displayName",component:Et,placeholder:"Display Name"}),r.a.createElement(gt.a,{name:"userName",component:Et,placeholder:"User Name"}),r.a.createElement(gt.a,{name:"password",component:Et,placeholder:"Password",type:"password"}),c&&r.a.createElement(wt,{error:c}),r.a.createElement("br",null),r.a.createElement(u.a,{color:"teal",fluid:!0,disabled:i&&!n||o,loading:a,content:"Register"}))}})},xt=function(){var e=Object(n.useContext)(Je),t=e.userStore,a=t.LoggedIn,i=t.user,o=e.modalStore.openModal;return r.a.createElement(_e.a,{inverted:!0,textAlign:"center",vertical:!0,className:"masthead"},r.a.createElement(c.a,{text:!0},r.a.createElement(mt.a,{as:"h1",inverted:!0},r.a.createElement(s.a,{size:"massive",src:"/assets/logo.png",alt:"logo",style:{marginBottom:12}}),"Reactivities"),a&&i?r.a.createElement(n.Fragment,null,r.a.createElement(mt.a,{as:"h2",inverted:!0,content:"Welcome back ".concat(i.displayName)}),r.a.createElement(u.a,{as:d.a,to:"/activities",size:"huge",inverted:!0},"Activities")):r.a.createElement(n.Fragment,null,r.a.createElement(mt.a,{as:"h2",inverted:!0,content:"Welcome to Reactivies"}),r.a.createElement(u.a,{onClick:function(){o(r.a.createElement(Ct,null))},size:"huge",inverted:!0},"Login"),r.a.createElement(u.a,{onClick:function(){o(r.a.createElement(St,null))},size:"huge",inverted:!0},"Register"))))},kt=a(380),At=function(e){var t=e.input,a=e.width,n=e.rows,i=e.placeholder,o=e.meta,c=o.touched,l=o.error;return r.a.createElement(vt.a.Field,{error:c&&!!l,width:a},r.a.createElement("textarea",Object.assign({},t,{rows:n,placeholder:i})),c&&l&&r.a.createElement(Xe.a,{basic:!0,color:"red"},l))},zt=a(722),It=function(e){var t=e.input,a=e.width,n=e.options,i=e.placeholder,o=e.meta,c=o.touched,l=o.error;return r.a.createElement(vt.a.Field,{error:c&&!!l,width:a},r.a.createElement(zt.a,{value:t.value,options:n,placeholder:i,onChange:function(e,a){return t.onChange(a.value)}}),c&&l&&r.a.createElement(Xe.a,{basic:!0,color:"red"},l))},Pt=[{key:"drinks",text:"Drinks",value:"drinks"},{key:"culture",text:"Culture",value:"culture"},{key:"film",text:"Film",value:"film"},{key:"food",text:"Food",value:"food"},{key:"music",text:"Music",value:"music"},{key:"travel",text:"Travel",value:"travel"}],Rt=a(397),Nt=function(e){var t=e.input,a=e.width,n=e.placeholder,i=e.meta,o=i.touched,c=i.error;Object(Rt.a)(e,["input","width","placeholder","meta"]);return r.a.createElement(vt.a.Field,{error:o&&!!c,width:a},r.a.createElement("input",Object.assign({},t,{type:"Date",placeholder:n})),o&&c&&r.a.createElement(Xe.a,{basic:!0,color:"red"},c))},Ft=Object(Ot.combineValidators)({title:Object(Ot.isRequired)({message:"The event title is required"}),description:Object(Ot.composeValidators)(Object(Ot.isRequired)("Description"),Object(Ot.hasLengthGreaterThan)(4)({message:"Description most have at least 5 characters"}))(),category:Object(Ot.isRequired)("Category"),city:Object(Ot.isRequired)("City"),venue:Object(Ot.isRequired)("Venue"),date:Object(Ot.isRequired)("Date")}),Lt=Object(Ye.a)((function(e){var t=e.match,a=e.history,i=Object(n.useContext)(Je).activityStore,o=i.createActivity,c=i.editActivities,l=i.submiting,s=i.loadActivity,m=Object(n.useState)({id:"",title:"",category:"",description:"",date:"",city:"",venue:"",attendees:[],isGoing:!1,isHost:!1,comments:[]}),d=Object(Ke.a)(m,2),p=d[0],f=d[1];Object(n.useEffect)((function(){t.params.id&&s(t.params.id).then((function(e){f(e)}))}),[t.params.id,s]);return r.a.createElement(Qe.a,null,r.a.createElement(Qe.a.Column,{width:10},r.a.createElement(_e.a,{clearing:!0},r.a.createElement(gt.b,{onSubmit:function(e){if(console.log(e),0===e.id.length){var t=Object(b.a)({},e,{id:Object(kt.v4)()});o(t)}else c(e)},initialValues:p,validate:Ft,render:function(e){var n=e.handleSubmit,i=e.invalid,o=e.pristine;return r.a.createElement(vt.a,{onSubmit:n},r.a.createElement(gt.a,{name:"title",placeholder:"Title",value:p.title,component:Et}),r.a.createElement(gt.a,{name:"description",placeholder:"Description",value:p.description,rows:3,component:At}),r.a.createElement(gt.a,{component:It,options:Pt,name:"category",placeholder:"Category",value:p.category}),r.a.createElement(gt.a,{component:Nt,name:"date",placeholder:"Date",value:p.date}),r.a.createElement(gt.a,{component:Et,name:"city",placeholder:"City",value:p.city}),r.a.createElement(gt.a,{component:Et,name:"venue",placeholder:"Venue",value:p.venue}),r.a.createElement(u.a,{loading:l,floated:"right",positive:!0,disabled:i&&o,type:"submit",content:"Submit"}),r.a.createElement(u.a,{onClick:t.params.id?function(){return a.push("/activities/".concat(t.params.id))}:function(){return a.push("/activities")},floated:"right",type:"button",content:"Cancel"}))}}))))})),Mt={filter:"brightness(30%)"},Dt={position:"absolute",bottom:"5%",left:"5%",width:"100%",height:"auto",color:"white"},Ht=Object(Ye.a)((function(e){var t=e.activity,a=Object(n.useContext)(Je).activityStore,i=a.joinActivity,o=a.cancelAttendee,c=a.loading,l=t.attendees.filter((function(e){return e.isHost}))[0];return c?r.a.createElement(st,{content:"Loading..."}):r.a.createElement(_e.a.Group,null,r.a.createElement(_e.a,{basic:!0,attached:"top",style:{padding:"0"}},r.a.createElement(s.a,{src:"/assets/categoryImages/".concat(t.category,".jpg"),fluid:!0,style:Mt}),r.a.createElement(_e.a,{style:Dt,basic:!0},r.a.createElement(Ze.a.Group,null,r.a.createElement(Ze.a,null,r.a.createElement(Ze.a.Content,null,r.a.createElement(mt.a,{size:"huge",content:t.title,style:{color:"white"}}),r.a.createElement("p",null,t.date),r.a.createElement("p",null,"Hosted by",r.a.createElement(d.a,{to:"/profile/".concat(l.userName)},r.a.createElement("strong",null," ",l.displayName)))))))),r.a.createElement(_e.a,{clearing:!0,attached:"bottom"},t.isHost?r.a.createElement(u.a,{as:d.a,to:"/activitiesEdit/".concat(t.id),color:"orange",floated:"right"},"Manage Event"):t.isGoing?r.a.createElement(u.a,{onClick:o},"Cancel attendance"):r.a.createElement(u.a,{onClick:i,color:"teal"},"Join Activity")))})),Ut=a(733),Gt=a(145),Tt=function(e){var t=e.activity;return r.a.createElement(_e.a.Group,null,r.a.createElement(_e.a,{attached:"top"},r.a.createElement(Qe.a,null,r.a.createElement(Qe.a.Column,{width:1},r.a.createElement(et.a,{size:"large",color:"teal",name:"info"})),r.a.createElement(Qe.a.Column,{width:15},r.a.createElement("p",null,t.description)))),r.a.createElement(_e.a,{attached:!0},r.a.createElement(Qe.a,{verticalAlign:"middle"},r.a.createElement(Qe.a.Column,{width:1},r.a.createElement(et.a,{name:"calendar alternate",size:"large",color:"teal"})),r.a.createElement(Qe.a.Column,{width:15},r.a.createElement("span",null,Object(Ut.a)(t.date,new Date).concat(Object(Gt.a)(t.date,new Date)<0?" Ago":" Left")," ")))),r.a.createElement(_e.a,{attached:!0},r.a.createElement(Qe.a,{verticalAlign:"middle"},r.a.createElement(Qe.a.Column,{width:1},r.a.createElement(et.a,{name:"map marker",size:"large",color:"teal"})),r.a.createElement(Qe.a.Column,{width:11},r.a.createElement("span",null,t.venue,", ",t.city)))))},qt=a(728),Bt=Object(Ye.a)((function(){var e=Object(n.useContext)(Je).activityStore,t=e.createHubConnection,a=e.addComment,i=e.stopHubConnection,o=e.selectedActivity;return Object(n.useEffect)((function(){return t(),function(){return i()}}),[t,i]),r.a.createElement(n.Fragment,null,r.a.createElement(_e.a,{textAlign:"center",attached:"top",inverted:!0,color:"teal",style:{border:"none"}},r.a.createElement(mt.a,null,"Chat about this event")),r.a.createElement(_e.a,{attached:!0},r.a.createElement(qt.a.Group,null,o&&o.comments&&o.comments.map((function(e){return r.a.createElement(qt.a,{key:e.id},r.a.createElement(qt.a.Avatar,{src:e.image&&"/assets/images/".concat(e.image,".jpg")||"/assets/user.png"}),r.a.createElement(qt.a.Content,null,r.a.createElement(qt.a.Author,{as:d.a,to:"/profile/".concat(e.userName)},e.displayName),r.a.createElement(qt.a.Metadata,null,r.a.createElement("div",null,Object(Ut.a)(e.createdAt,new Date))),r.a.createElement(qt.a.Text,null,e.body),r.a.createElement(qt.a.Actions,null,r.a.createElement(qt.a.Action,null,"Reply"))))})),r.a.createElement(gt.b,{onSubmit:a,render:function(e){var t=e.handleSubmit,a=e.submitting,n=e.form;return r.a.createElement(vt.a,{onSubmit:function(){t().then((function(){return n.reset()}))}},r.a.createElement(gt.a,{name:"Body",component:At,rows:2,placeholder:"Add your comment"}),r.a.createElement(u.a,{content:"Add Reply",labelPosition:"left",icon:"edit",primary:!0,loading:a}))}}))))})),Vt=Object(Ye.a)((function(e){var t=e.attendees;return r.a.createElement(n.Fragment,null,r.a.createElement(_e.a,{textAlign:"center",style:{border:"none"},attached:"top",secondary:!0,inverted:!0,color:"teal"},t.length," People Going"),r.a.createElement(_e.a,{attached:!0},r.a.createElement(tt.a,{relaxed:!0,divided:!0},t.map((function(e){return r.a.createElement(Ze.a,{key:e.userName,style:{position:"relative"}},e.isHost&&r.a.createElement(Xe.a,{style:{position:"absolute"},color:"orange",ribbon:"right"},"Host"),r.a.createElement(s.a,{size:"tiny",src:e.image?"/assets/Images/".concat(e.image,".jpg"):"/assets/user.png"}),r.a.createElement(Ze.a.Content,{verticalAlign:"middle"},r.a.createElement(Ze.a.Header,{as:"h3"},r.a.createElement(d.a,{to:"/profile/".concat(e.userName)},e.displayName)),e.following&&r.a.createElement(Ze.a.Extra,{style:{color:"orange"}},"Following")))})))))})),Wt=Object(Ye.a)((function(e){var t=e.match,a=(e.history,Object(n.useContext)(Je).activityStore),i=a.selectedActivity,o=a.loadActivity,c=a.loadingInitial;return Object(n.useEffect)((function(){o(t.params.id)}),[o,t.params.id]),c||!i?r.a.createElement(st,{content:"Loading activity..."}):r.a.createElement(Qe.a,null,r.a.createElement(Qe.a.Column,{width:10},r.a.createElement(Ht,{activity:i}),r.a.createElement(Tt,{activity:i}),r.a.createElement(Bt,null)),r.a.createElement(Qe.a.Column,{width:6},r.a.createElement(Vt,{attendees:i.attendees})))})),Jt=function(){return r.a.createElement(_e.a,{placeholder:!0},r.a.createElement(mt.a,{icon:!0},r.a.createElement(et.a,{name:"search"}),"Oops - we've looked everywhere but couldn't find this."),r.a.createElement(_e.a.Inline,null,r.a.createElement(u.a,{as:d.a,to:"/activities",primary:!0},"Return to Activities page")))},Yt=a(726),$t=Object(Ye.a)((function(){var e=Object(n.useContext)(Je).modalStore,t=e.modal,a=t.open,i=t.body,o=e.closeModal;return r.a.createElement(Yt.a,{open:a,onClose:o,size:"mini"},r.a.createElement(Yt.a.Content,null,i))})),Kt=a(736),Qt=a(723),Xt=a(740),Zt=Object(Ye.a)((function(e){var t=e.profile,a=e.isCurrentUser,n=e.follow,i=e.unfollow,o=(null===t||void 0===t?void 0:t.image)?"/assets/Images/".concat(t.image,".jpg"):"/assets/user.png";return r.a.createElement(_e.a,null,r.a.createElement(Qe.a,null,r.a.createElement(Qe.a.Column,{width:12},r.a.createElement(Ze.a.Group,null,r.a.createElement(Ze.a,null,r.a.createElement(Ze.a.Image,{avatar:!0,size:"small",src:o}),r.a.createElement(Ze.a.Content,{verticalAlign:"middle"},r.a.createElement(mt.a,{as:"h1"},null===t||void 0===t?void 0:t.displayName))))),r.a.createElement(Qe.a.Column,{width:4},r.a.createElement(Kt.a.Group,{widths:2},r.a.createElement(Kt.a,{label:"Followers",value:null===t||void 0===t?void 0:t.followersCount}),r.a.createElement(Kt.a,{label:"Following",value:null===t||void 0===t?void 0:t.followingCount})),r.a.createElement(Qt.a,null),!a&&r.a.createElement(Xt.a,{animated:"move"},r.a.createElement(Xt.a.Content,{visible:!0,style:{width:"100%"}},r.a.createElement(u.a,{fluid:!0,color:"teal",content:(null===t||void 0===t?void 0:t.following)?"Following":"Not following"})),r.a.createElement(Xt.a.Content,{hidden:!0},r.a.createElement(u.a,{fluid:!0,basic:!0,color:(null===t||void 0===t?void 0:t.following)?"red":"green",content:(null===t||void 0===t?void 0:t.following)?"Unfollow":"Follow",onClick:(null===t||void 0===t?void 0:t.following)?function(){return i(t.userName)}:function(){return n(t.userName)}}))))))})),_t=a(741),ea=a(732),ta=a(392),aa={border:"dashed 3px",borderColor:"#eee",borderRadius:"5px",paddingTop:"30px",textAlign:"center",height:"200px"},na={borderColor:"green"},ra=function(e){var t=e.setFiles,a=Object(n.useCallback)((function(e){t(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}),[t]),i=Object(ta.a)({onDrop:a}),o=i.getRootProps,c=i.getInputProps,l=i.isDragActive;return r.a.createElement("div",Object.assign({},o(),{style:l?Object(b.a)({},aa,{},na):aa}),r.a.createElement("input",c()),r.a.createElement(et.a,{name:"upload",size:"huge"}),r.a.createElement(mt.a,{content:"Drop image here"}))},ia=a(390),oa=a.n(ia),ca=(a(675),function(e){var t=e.setImage,a=e.imagePreview,i=Object(n.useRef)(null);return r.a.createElement(oa.a,{ref:i,src:a,style:{height:200,width:"100%"},aspectRatio:1,guides:!1,viewMode:1,dragMode:"move",scalable:!0,cropBoxMovable:!0,cropBoxResizable:!0,crop:function(){var e,a;i.current&&"undefined"===typeof(null===(e=i.current)||void 0===e?void 0:e.getCroppedCanvas())||i&&i.current&&(null===(a=i.current)||void 0===a||a.getCroppedCanvas().toBlob((function(e){t(e)}),"image/jpg"))},preview:".img-preview"})}),la=Object(Ye.a)((function(e){var t=e.loading,a=e.uploadPhoto,i=Object(n.useState)([]),o=Object(Ke.a)(i,2),c=o[0],l=o[1],s=Object(n.useState)(null),m=Object(Ke.a)(s,2),d=m[0],p=m[1];return Object(n.useEffect)((function(){return function(){c.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[c]),console.log(c.length),r.a.createElement(n.Fragment,null,r.a.createElement(Qe.a,null,r.a.createElement(Qe.a.Column,{width:4},r.a.createElement(mt.a,{color:"teal",sub:!0,content:"Step 1: Add Photo"}),r.a.createElement(ra,{setFiles:l})),r.a.createElement(Qe.a.Column,{width:1}),r.a.createElement(Qe.a.Column,{width:4},r.a.createElement(mt.a,{color:"teal",sub:!0,content:"Step 2: Resize Image"}),c.length>0&&r.a.createElement(ca,{setImage:p,imagePreview:c[0].preview})),r.a.createElement(Qe.a.Column,{width:1}),r.a.createElement(Qe.a.Column,{width:4},r.a.createElement(mt.a,{color:"teal",sub:!0,content:"Step 3: Preview-Upload"}),c.length>0&&r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"img-preview",style:{minHeight:"200px",overflow:"hidden"}}),r.a.createElement(u.a.Group,{widths:2},r.a.createElement(u.a,{positive:!0,icon:"check",loading:t,onClick:function(){return a(d)}}),r.a.createElement(u.a,{icon:"close",disabled:t,onClick:function(){return l([])}}))))))})),ua=Object(Ye.a)((function(){var e=Object(n.useContext)(Je).profileStore,t=e.profile,a=e.IsCurrentUser,i=e.UploadPhoto,o=e.uploading,c=e.setMain,l=e.loadingSetting,m=e.deleteUser,d=Object(n.useState)(!1),p=Object(Ke.a)(d,2),b=p[0],f=p[1];return l?r.a.createElement(st,{content:"Appling..."}):r.a.createElement(_t.a.Pane,null,r.a.createElement(Qe.a,null,r.a.createElement(Qe.a.Column,{width:16},r.a.createElement(mt.a,{floated:"left",icon:"image",content:"Photos"}),a&&r.a.createElement(u.a,{floated:"right",basic:!0,content:b?"Cancel":"Add photo",onClick:function(){f(!b)}})),r.a.createElement(Qe.a.Column,{width:16},b?r.a.createElement(la,{uploadPhoto:function(e){i(e).then((function(){return f(!1)}))},loading:o}):r.a.createElement(ea.a.Group,{itemsPerRow:5},t&&t.photos.map((function(e){return r.a.createElement(ea.a,{fluid:!0,key:e.id},r.a.createElement(s.a,{size:"medium",src:"/assets/Images/".concat(e.id,".jpg")}),a&&r.a.createElement(u.a.Group,{fluid:!0,widths:2},r.a.createElement(u.a,{basic:!0,positive:!0,content:"Main",disabled:e.isMain,loading:l,onClick:function(){return c(e)}}),r.a.createElement(u.a,{basic:!0,negative:!0,icon:"trash",disabled:e.isMain||t.photos.length<2,loading:l,onClick:function(){return m(e)}})))}))))))})),sa=Object(Ye.a)((function(e){var t=e.profile;return r.a.createElement(ea.a,{as:d.a,to:"/profile/".concat(t.userName)},r.a.createElement(s.a,{src:t.image&&"/assets/Images/".concat(t.image,".jpg")||"/assets/user.png"}),r.a.createElement(ea.a.Content,null,r.a.createElement(ea.a.Header,null,t.displayName)),r.a.createElement(ea.a.Content,{extra:!0},r.a.createElement("div",null,r.a.createElement(et.a,{name:"user"}),t.followersCount," Followers")))})),ma=Object(Ye.a)((function(e){var t=e.consult,a=Object(n.useContext)(Je).profileStore,i=a.profile,o=a.followings,c=a.loadingSetting,l=a.loadFollows;return Object(n.useEffect)((function(){l(t)}),[l,t]),r.a.createElement(_t.a.Pane,{loading:c},r.a.createElement(Qe.a,null,r.a.createElement(Qe.a.Column,{width:16},r.a.createElement(mt.a,{floated:"left",icon:"user",content:"followers"===t?"People following ".concat(i.displayName):"People ".concat(i.displayName," is following")})),r.a.createElement(Qe.a.Column,{width:16},r.a.createElement(ea.a.Group,{itemsPerRow:5},o.map((function(e){return r.a.createElement(sa,{key:e.userName,profile:e})}))))))})),da=[{menuItem:"Future Events",pane:{key:"futureEvents"}},{menuItem:"Past Events",pane:{key:"pastEvents"}},{menuItem:"Hosting",pane:{key:"hosted"}}],pa=Object(Ye.a)((function(){var e=Object(n.useContext)(Je).profileStore,t=e.loadUserActivities,a=e.profile,i=e.loadingActivities,o=e.userActivities;Object(n.useEffect)((function(){t(a.userName)}),[t,a]);return r.a.createElement(_t.a.Pane,{loading:i},r.a.createElement(Qe.a,null,r.a.createElement(Qe.a.Column,{width:16},r.a.createElement(mt.a,{floated:"left",icon:"calendar",content:"Activities"})),r.a.createElement(Qe.a.Column,{width:16},r.a.createElement(_t.a,{panes:da,menu:{secondary:!0,pointing:!0},onTabChange:function(e,n){return function(e,n){var r;switch(n.activeIndex){case 1:r="past";break;case 2:r="hosting";break;default:r="future"}console.log("ua1: ",o),t(a.userName,r),console.log("ua2: ",o)}(0,n)}}),r.a.createElement("br",null),r.a.createElement(ea.a.Group,{itemsPerRow:4},o.map((function(e){return r.a.createElement(ea.a,{as:d.a,to:"/activities/".concat(e.id),key:e.id},r.a.createElement(s.a,{src:"/assets/categoryImages/".concat(e.category,".jpg"),style:{minHeight:100,objectFit:"cover"}}),r.a.createElement(ea.a.Content,null,r.a.createElement(ea.a.Header,{textAlign:"center"},e.title),r.a.createElement(ea.a.Meta,{textAlign:"center"},r.a.createElement("div",null,Object(ot.a)(new Date(e.date),"do LLL")),r.a.createElement("div",null,Object(ot.a)(new Date(e.date),"h:mm a")))))}))))))})),ba=[{menuItem:"About",render:function(){return r.a.createElement(_t.a.Pane,null,"About content")}},{menuItem:"Photos",render:function(){return r.a.createElement(ua,null)}},{menuItem:"Activities",render:function(){return r.a.createElement(pa,null)}},{menuItem:"Followers",render:function(){return r.a.createElement(ma,{consult:"followers"})}},{menuItem:"Following",render:function(){return r.a.createElement(ma,{consult:"following"})}}],fa=Object(Ye.a)((function(){return r.a.createElement(_t.a,{menu:{fluid:!0,vertical:!0},menuPosition:"right",panes:ba})})),ha=Object(Ye.a)((function(e){var t=e.match,a=Object(n.useContext)(Je).profileStore,i=a.loading,o=a.LoadProfile,c=a.profile,l=a.follow,u=a.unfollow,s=a.IsCurrentUser;return Object(n.useEffect)((function(){o(t.params.username)}),[o,t]),i?r.a.createElement(st,{content:"Loading Profile..."}):r.a.createElement(Qe.a,null,r.a.createElement(Qe.a.Column,{width:16},r.a.createElement(Zt,{profile:c,isCurrentUser:s,follow:l,unfollow:u}),r.a.createElement(fa,null)))})),ga=Object(ft.f)(Object(Ye.a)((function(e){var t=e.location,a=Object(n.useContext)(Je),i=a.commonStore,o=i.token,l=i.setLoaded,u=i.appLoadded,s=a.userStore.GetUser;return Object(n.useEffect)((function(){o?s().finally((function(){return l()})):l()}),[l,o,s]),u?r.a.createElement(n.Fragment,null,r.a.createElement($t,null),r.a.createElement(S.a,{position:"bottom-right"}),r.a.createElement(ft.a,{exact:!0,path:"/",component:xt}),r.a.createElement(ft.a,{path:"/(.+)",render:function(){return r.a.createElement(n.Fragment,null,r.a.createElement($e,null),r.a.createElement(c.a,{style:{marginTop:"7em"}},r.a.createElement(ft.c,null,r.a.createElement(ft.a,{exact:!0,path:"/activities",component:bt}),r.a.createElement(ft.a,{exact:!0,path:"/activities/:id",component:Wt}),r.a.createElement(ft.a,{key:t.key,path:["/activitiesCreate","/activitiesEdit/:id"],component:Lt}),r.a.createElement(ft.a,{path:"/profile/:username",component:ha}),r.a.createElement(ft.a,{component:Jt}))))}})):r.a.createElement(st,{content:"Loading App..."})})));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var va=a(51),Ea=Object(ft.f)((function(e){var t=e.children,a=e.location.pathname;return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[a]),t||null})),ja=(a(676),a(677),a(391));a.n(ja)()();var Oa=Object(va.a)();o.a.render(r.a.createElement(ft.b,{history:Oa},r.a.createElement(Ea,null,r.a.createElement(ga,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[406,1,2]]]);
//# sourceMappingURL=main.62f44468.chunk.js.map